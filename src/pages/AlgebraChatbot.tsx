import { useState, useRef, useEffect } from "react";
import { motion, AnimatePresence } from "framer-motion";
import { Send, Bot, User, Brain, AlertTriangle, Sparkles, Database, History, Calculator, BookOpen, Lightbulb } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Card, CardContent } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { ScrollArea } from "@/components/ui/scroll-area";
import { Alert, AlertDescription } from "@/components/ui/alert";
import { AlgebraSolver } from "@/lib/algebraSolver";
import { expandedAlgebraDatabase, searchDatabase, getRandomTopic, type AlgebraKnowledge } from "@/lib/expandedAlgebraDatabase";
import { toast } from "sonner";

interface ChatMessage {
  id: string;
  content: string;
  sender: 'user' | 'bot';
  timestamp: Date;
  type?: 'solution' | 'explanation' | 'history' | 'general';
}

const AlgebraChatbot = () => {
  const [messages, setMessages] = useState<ChatMessage[]>([
    {
      id: '1',
      content: '**ржЖрж╕рж╕рж╛рж▓рж╛ржорзБ ржЖрж▓рж╛ржЗржХрзБржо!** ЁЯМЯ\n\nржЖржорж┐ **ржмрзАржЬржЧржгрж┐ржд ржЬрзНржЮрж╛ржирзЗрж░ ржПржЖржЗ рж╕рж╣рж╛ржпрж╝ржХ**ред ржЖржорж┐ ржЖржкржирж╛ржХрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржкрж╛рж░рж┐:\n\nтАв ЁЯзо **рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржи** (рж░рзИржЦрж┐ржХ, ржжрзНржмрж┐ржШрж╛ржд, ржЧрзБржгржирзАржпрж╝ржХрж░ржг)\nтАв ЁЯУЪ **ржзрж╛рж░ржгрж╛ ржмрзНржпрж╛ржЦрзНржпрж╛** (рж╕рзВрждрзНрж░, ржирж┐ржпрж╝ржо, ржкржжрзНржзрждрж┐)\nтАв ЁЯПЫя╕П **ржЗрждрж┐рж╣рж╛рж╕** (ржЖрж▓-ржЦрзЛржпрж╝рж╛рж░рж┐ржЬржорж┐ ржерзЗржХрзЗ ржЖржзрзБржирж┐ржХ ржпрзБржЧ)\nтАв ЁЯОп **ржЙржжрж╛рж╣рж░ржг ржУ ржЕржирзБрж╢рзАрж▓ржи**\n\nржХрзАржнрж╛ржмрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржкрж╛рж░рж┐?',
      sender: 'bot',
      timestamp: new Date(),
      type: 'general'
    }
  ]);
  const [input, setInput] = useState("");
  const [isLoading, setIsLoading] = useState(false);
  const messagesEndRef = useRef<HTMLDivElement>(null);

  const handleSendMessage = async () => {
    if (!input.trim()) return;

    const userMessage: ChatMessage = {
      id: Date.now().toString(),
      content: input.trim(),
      sender: 'user',
      timestamp: new Date()
    };

    setMessages(prev => [...prev, userMessage]);
    setInput("");
    setIsLoading(true);

    // Simulate processing time
    setTimeout(() => {
      const response = generateBotResponse(input.trim());
      const botMessage: ChatMessage = {
        id: (Date.now() + 1).toString(),
        content: response.content,
        sender: 'bot',
        timestamp: new Date(),
        type: response.type
      };

      setMessages(prev => [...prev, botMessage]);
      setIsLoading(false);
    }, 1000 + Math.random() * 2000);
  };

  const generateBotResponse = (userInput: string): { content: string; type: ChatMessage['type'] } => {
    const input = userInput.toLowerCase();

    // Check if it's a math problem that needs solving
    if (input.includes('=') || input.includes('рж╕ржорж╛ржзрж╛ржи') || input.includes('solve')) {
      try {
        const solution = AlgebraSolver.solve(userInput);
        return {
          content: `ЁЯФН **рж╕ржорж╛ржзрж╛ржи:**\n\n**рж╕ржорж╕рзНржпрж╛:** \`${userInput}\`\n\n**ржзрж╛ржкрж╕ржорзВрж╣:**\n${solution.steps.map(step => `тАв ${step}`).join('\n')}\n\n**тЬЕ ржЙрждрзНрждрж░:** \`${solution.solution}\`\n\n**ЁЯУЭ ржмрзНржпрж╛ржЦрзНржпрж╛:** ржПржЯрж┐ ржПржХржЯрж┐ **${solution.type}** рж╕ржорж╕рзНржпрж╛ ржпрзЗржЦрж╛ржирзЗ ржЖржорж░рж╛ **${solution.variable}** ржПрж░ ржорж╛ржи ржмрзЗрж░ ржХрж░рзЗржЫрж┐ред\n\n*ржЖрж░рзЛ рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржи ржХрж░рждрзЗ ржЪрж╛ржи?*`,
          type: 'solution'
        };
      } catch (error) {
        return {
          content: `тЭМ **ржжрзБржГржЦрж┐ржд!** ржПржЗ рж╕ржорж╕рзНржпрж╛ржЯрж┐ рж╕ржорж╛ржзрж╛ржи ржХрж░рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗред\n\n**ЁЯТб рж╕ржарж┐ржХ ржлрж░ржорзНржпрж╛ржЯ:**\nтАв \`x + 5 = 10\`\nтАв \`2x┬▓ - 8 = 0\`\nтАв \`3x - 7 = 14\`\n\n*ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржи!*`,
          type: 'general'
        };
      }
    }

    // Search through expanded knowledge base
    const searchResults = searchDatabase(input);
    if (searchResults.length > 0) {
      const knowledge = searchResults[0]; // Get the best match
      const examples = knowledge.examples.map(ex => `тАв \`${ex}\``).join('\n');
      const difficultyEmoji = 'тнР'.repeat(knowledge.difficulty);
      
      return {
        content: `ЁЯУЪ **${knowledge.topic}** ${difficultyEmoji}\n\n${knowledge.content}\n\n**ЁЯУЦ ржЙржжрж╛рж╣рж░ржгрж╕ржорзВрж╣:**\n${examples}\n\n*ржЖрж░рзЛ ржЬрж╛ржирждрзЗ ржЪрж╛ржи ржмрж╛ ржЕржирзНржп ржХрж┐ржЫрзБ?*`,
        type: 'explanation'
      };
    }

    // History-related responses with more detail
    if (input.includes('ржЗрждрж┐рж╣рж╛рж╕') || input.includes('history') || input.includes('ржХрзЗ ржЖржмрж┐рж╖рзНржХрж╛рж░') || input.includes('ржЖржмрж┐рж╖рзНржХрж╛рж░')) {
      const historyTopics = expandedAlgebraDatabase.filter(item => item.category === 'history');
      const randomHistory = historyTopics[Math.floor(Math.random() * historyTopics.length)];
      
      return {
        content: `ЁЯПЫя╕П **ржмрзАржЬржЧржгрж┐рждрзЗрж░ ржЗрждрж┐рж╣рж╛рж╕**\n\n${randomHistory.content}\n\n**ЁЯМЯ ржорзВрж▓ ржмрзНржпржХрзНрждрж┐рждрзНржмржЧржг:**\nтАв **ржЖрж▓-ржЦрзЛржпрж╝рж╛рж░рж┐ржЬржорж┐ (рзнрзорзж-рзорзлрзж):** ржмрзАржЬржЧржгрж┐рждрзЗрж░ ржЬржиржХ\nтАв **ржмрзНрж░рж╣рзНржоржЧрзБржкрзНржд (рзмрзирзо-рзмрзмрзо):** рж╢рзВржирзНржпрзЗрж░ ржмрзНржпржмрж╣рж╛рж░\nтАв **ржЖрж░рзНржпржнржЯрзНржЯ (рзкрзнрзм-рзлрзлрзж):** ржнрж╛рж░рждрзАржпрж╝ ржЧржгрж┐рждржмрж┐ржж\nтАв **ржнрж┐ржпрж╝рзЗржд (рззрзлрзкрзж-рззрзмрзжрзй):** ржкрзНрж░рждрзАржХрзА ржмрзАржЬржЧржгрж┐ржд\n\n*ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржЬрж╛ржирждрзЗ "ржЗрждрж┐рж╣рж╛рж╕" ржЯрзНржпрж╛ржмрзЗ ржпрж╛ржи!*`,
        type: 'history'
      };
    }

    // Random topic suggestion
    if (input.includes('ржХрж┐ржЫрзБ') || input.includes('рж╢рзЗржЦрж╛') || input.includes('ржЬрж╛ржи') || input.includes('help')) {
      const randomTopic = getRandomTopic();
      return {
        content: `ЁЯТб **ржЖржЬ ржХрзА рж╢рж┐ржЦржмрзЗржи?**\n\n**${randomTopic.topic}**\n\n${randomTopic.content.substring(0, 200)}...\n\n**ЁЯОп ржмрж┐рж╖ржпрж╝ржХ ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐рж╕ржорзВрж╣:**\nтАв ЁЯЯв **ржорзВрж▓ржнрж┐рждрзНрждрж┐ржХ:** рж░рзИржЦрж┐ржХ рж╕ржорзАржХрж░ржг, ржЧрзБржгржирзАржпрж╝ржХрж░ржг\nтАв ЁЯЯб **ржоржзрзНржпржо:** ржжрзНржмрж┐ржШрж╛ржд рж╕ржорзАржХрж░ржг, ржЕрж╕ржорждрж╛\nтАв ЁЯФ┤ **ржЙржЪрзНржЪржкрж░рзНржпрж╛ржпрж╝:** ржЬржЯрж┐рж▓ рж╕ржВржЦрзНржпрж╛, ржЧрзНрж░рзБржк рждрждрзНрждрзНржм\nтАв ЁЯУЬ **ржЗрждрж┐рж╣рж╛рж╕:** ржкрзНрж░рж╛ржЪрзАржиржХрж╛рж▓ ржерзЗржХрзЗ ржЖржзрзБржирж┐ржХ ржпрзБржЧ\n\n*ржХрзЛржи ржмрж┐рж╖ржпрж╝рзЗ ржЖржЧрзНрж░рж╣рзА?*`,
        type: 'general'
      };
    }

    // Enhanced default responses
    const enhancedResponses = [
      `ЁЯМЯ **ржжрзБрж░рзНржжрж╛ржирзНржд ржкрзНрж░рж╢рзНржи!** ржЖржорж┐ ржЖржкржирж╛ржХрзЗ ржмрзАржЬржЧржгрж┐ржд рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржи, рж╕рзВрждрзНрж░ ржПржмржВ ржмрзНржпрж╛ржЦрзНржпрж╛ржпрж╝ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржкрж╛рж░рж┐ред\n\n**ЁЯТл ржЙржжрж╛рж╣рж░ржг ржкрзНрж░рж╢рзНржи:**\nтАв "рзиx + рзл = рззрзз рж╕ржорж╛ржзрж╛ржи ржХрж░рзЛ"\nтАв "ржжрзНржмрж┐ржШрж╛ржд рж╕ржорзАржХрж░ржг ржХрзА?"\nтАв "ржЧрзБржгржирзАржпрж╝ржХрж░ржг рж╢рзЗржЦрж╛ржУ"\n\n*ржХрзА ржЬрж╛ржирждрзЗ ржЪрж╛ржи?*`,
      
      `ЁЯЪА **ржЖржорж┐ ржПржЦрж╛ржирзЗ ржЖржЫрж┐ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рж╛рж░ ржЬржирзНржп!**\n\n**ЁЯУЪ ржЖржорж╛рж░ ржмрж┐рж╢рзЗрж╖рждрзНржм:**\nтАв тЬЕ рж░рзИржЦрж┐ржХ ржУ ржжрзНржмрж┐ржШрж╛ржд рж╕ржорзАржХрж░ржг\nтАв тЬЕ ржЧрзБржгржирзАржпрж╝ржХрж░ржг ржУ рж╕рзВрждрзНрж░рж╛ржмрж▓рзА\nтАв тЬЕ ржмрзАржЬржЧржгрж┐рждрзЗрж░ ржЗрждрж┐рж╣рж╛рж╕\nтАв тЬЕ ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ рж╕ржорж╛ржзрж╛ржи\n\n*ржпрзЗржХрзЛржирзЛ ржмрж┐рж╖ржпрж╝рзЗ ржкрзНрж░рж╢рзНржи ржХрж░рзБржи!*`,
      
      `ЁЯОп **ржмрзАржЬржЧржгрж┐ржд ржирж┐ржпрж╝рзЗ ржХрзЛржи рж╕ржорж╕рзНржпрж╛ржпрж╝ ржЖржЫрзЗржи?**\n\nржЖржорж┐ ржЖржкржирж╛ржХрзЗ ржжрж┐рждрзЗ ржкрж╛рж░рж┐:\nтАв ЁЯФН **ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд рж╕ржорж╛ржзрж╛ржи**\nтАв ЁЯУЦ **рж╕рж╣ржЬ ржмрзНржпрж╛ржЦрзНржпрж╛**\nтАв ЁЯПЖ **ржЕржирзБрж╢рзАрж▓ржирзА**\nтАв ЁЯУИ **ржкрж░ржмрж░рзНрждрзА ржзрж╛ржк**\n\n*ржПржХржЯрж┐ рж╕ржорзАржХрж░ржг ржжрж┐ржи ржмрж╛ ржЯржкрж┐ржХ ржмрж▓рзБржи!*`,
      
      `ЁЯдФ **ржХрзА ржЬрж╛ржирждрзЗ ржЪрж╛ржи?**\n\n**ЁЯФе ржЬржиржкрзНрж░рж┐ржпрж╝ ржмрж┐рж╖ржпрж╝:**\nтАв рж╕ржорзАржХрж░ржг рж╕ржорж╛ржзрж╛ржи\nтАв ржмрзАржЬржЧржгрж┐рждрзАржпрж╝ рж╕рзВрждрзНрж░\nтАв ржЧрзБржгржирзАржпрж╝ржХрж░ржг ржкржжрзНржзрждрж┐\nтАв ржмрзАржЬржЧржгрж┐рждрзЗрж░ ржЗрждрж┐рж╣рж╛рж╕\n\n**ЁЯТб ржЯрж┐ржкрж╕:** рж╕рзНржкрзЗрж╕рж┐ржлрж┐ржХ ржкрзНрж░рж╢рзНржи ржХрж░рж▓рзЗ ржЖрж░рзЛ ржнрж╛рж▓рзЛ рж╕рж╛рж╣рж╛ржпрзНржп ржкрж╛ржмрзЗржи!\n\n*ржЖржкржирж╛рж░ ржкрзНрж░рж╢рзНржи ржХрзА?*`
    ];

    return {
      content: enhancedResponses[Math.floor(Math.random() * enhancedResponses.length)],
      type: 'general'
    };
  };

  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  }, [messages]);

  const handleKeyPress = (e: React.KeyboardEvent) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      handleSendMessage();
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-background via-primary/5 to-secondary/10">
      {/* Header */}
      <div className="border-b bg-white/80 backdrop-blur-sm sticky top-0 z-10">
        <div className="container mx-auto px-4 py-4">
          <div className="flex items-center justify-between">
            <motion.div
              initial={{ opacity: 0, x: -20 }}
              animate={{ opacity: 1, x: 0 }}
              className="flex items-center gap-3"
            >
              <div className="p-2 bg-primary/10 rounded-full">
                <Brain className="h-6 w-6 text-primary" />
              </div>
              <div>
                <h1 className="text-xl font-bold text-primary font-['Hind_Siliguri']">
                  ржмрзАржЬржЧржгрж┐ржд ржЪрзНржпрж╛ржЯржмржЯ
                </h1>
                <div className="flex items-center gap-2">
                  <Badge variant="secondary" className="text-xs font-['Hind_Siliguri']">
                    ржмрзЗржЯрж╛ рж╕ржВрж╕рзНржХрж░ржг
                  </Badge>
                  <Badge variant="outline" className="text-xs font-['Hind_Siliguri']">
                    ржХрж╛ржЬ ржЪрж▓ржорж╛ржи
                  </Badge>
                </div>
              </div>
            </motion.div>
            
            <div className="flex items-center gap-2 text-sm text-muted-foreground font-['Hind_Siliguri']">
              <Database className="h-4 w-4" />
              <span>ржПржЖржЗ ржЪрж╛рж▓рж┐ржд</span>
            </div>
          </div>
        </div>
      </div>

      {/* Beta Warning */}
      <div className="container mx-auto px-4 py-4">
        <Alert className="border-orange-200 bg-orange-50">
          <AlertTriangle className="h-4 w-4 text-orange-600" />
          <AlertDescription className="font-['Hind_Siliguri'] text-orange-800">
            <strong>ржмрзЗржЯрж╛ рж╕ржВрж╕рзНржХрж░ржг:</strong> ржПржЗ ржЪрзНржпрж╛ржЯржмржЯржЯрж┐ ржПржЦржирзЛ ржЙржирзНржиржпрж╝ржирж╛ржзрзАржиред ржХрж┐ржЫрзБ ржЙрждрзНрждрж░ рж╕ржарж┐ржХ ржирж╛ржУ рж╣рждрзЗ ржкрж╛рж░рзЗред ржЖржкржирж╛рж░ ржорждрж╛ржоржд ржЖржорж╛ржжрзЗрж░ ржХрж╛ржЫрзЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг!
          </AlertDescription>
        </Alert>
      </div>

      {/* Chat Container */}
      <div className="container mx-auto px-4 pb-4 max-w-4xl">
        <Card className="h-[70vh] flex flex-col">
          <CardContent className="flex-1 p-0">
            <ScrollArea className="h-full p-4">
              <div className="space-y-4">
                <AnimatePresence>
                  {messages.map((message) => (
                    <motion.div
                      key={message.id}
                      initial={{ opacity: 0, y: 20 }}
                      animate={{ opacity: 1, y: 0 }}
                      exit={{ opacity: 0, y: -20 }}
                      className={`flex ${message.sender === 'user' ? 'justify-end' : 'justify-start'}`}
                    >
                      <div className={`max-w-[80%] ${message.sender === 'user' ? 'ml-12' : 'mr-12'}`}>
                        <div className="flex items-start gap-2 mb-2">
                          {message.sender === 'bot' && (
                            <div className="p-1.5 bg-primary/10 rounded-full">
                              <Bot className="h-4 w-4 text-primary" />
                            </div>
                          )}
                          {message.sender === 'user' && (
                            <div className="p-1.5 bg-blue-100 rounded-full order-2">
                              <User className="h-4 w-4 text-blue-600" />
                            </div>
                          )}
                          <div className={`flex-1 ${message.sender === 'user' ? 'order-1' : ''}`}>
                            <div
                              className={`p-4 rounded-lg ${
                                message.sender === 'user'
                                  ? 'bg-blue-500 text-white'
                                  : 'bg-white border shadow-sm'
                              }`}
                            >
                              <div className="whitespace-pre-wrap font-['Hind_Siliguri'] leading-relaxed">
                                {message.content.split('**').map((part, index) => {
                                  if (index % 2 === 1) {
                                    return <strong key={index} className="font-bold text-primary">{part}</strong>;
                                  }
                                  // Handle code formatting
                                  const codeSegments = part.split('`');
                                  return codeSegments.map((codePart, codeIndex) => {
                                    if (codeIndex % 2 === 1) {
                                      return <code key={`${index}-${codeIndex}`} className="bg-muted px-1.5 py-0.5 rounded text-sm font-mono">{codePart}</code>;
                                    }
                                    return <span key={`${index}-${codeIndex}`}>{codePart}</span>;
                                  });
                                })}
                              </div>
                              {message.type && message.sender === 'bot' && (
                                <div className="flex items-center gap-1 mt-2 opacity-70">
                                  {message.type === 'solution' && <Calculator className="h-3 w-3" />}
                                  {message.type === 'history' && <History className="h-3 w-3" />}
                                  {message.type === 'explanation' && <Sparkles className="h-3 w-3" />}
                                  <span className="text-xs capitalize">
                                    {message.type === 'solution' && 'рж╕ржорж╛ржзрж╛ржи'}
                                    {message.type === 'history' && 'ржЗрждрж┐рж╣рж╛рж╕'}
                                    {message.type === 'explanation' && 'ржмрзНржпрж╛ржЦрзНржпрж╛'}
                                    {message.type === 'general' && 'рж╕рж╛ржзрж╛рж░ржг'}
                                  </span>
                                </div>
                              )}
                            </div>
                            <div className="text-xs text-muted-foreground mt-1 font-['Hind_Siliguri']">
                              {message.timestamp.toLocaleTimeString('bn-BD')}
                            </div>
                          </div>
                        </div>
                      </div>
                    </motion.div>
                  ))}
                </AnimatePresence>
                
                {isLoading && (
                  <motion.div
                    initial={{ opacity: 0, y: 20 }}
                    animate={{ opacity: 1, y: 0 }}
                    className="flex justify-start"
                  >
                    <div className="max-w-[80%] mr-12">
                      <div className="flex items-start gap-2">
                        <div className="p-1.5 bg-primary/10 rounded-full">
                          <Bot className="h-4 w-4 text-primary animate-pulse" />
                        </div>
                        <div className="bg-white border shadow-sm p-4 rounded-lg">
                          <div className="flex items-center gap-2 font-['Hind_Siliguri']">
                            <div className="flex gap-1">
                              <div className="w-2 h-2 bg-primary/60 rounded-full animate-bounce" />
                              <div className="w-2 h-2 bg-primary/60 rounded-full animate-bounce delay-100" />
                              <div className="w-2 h-2 bg-primary/60 rounded-full animate-bounce delay-200" />
                            </div>
                            <span className="text-sm text-muted-foreground">ржЪрж┐ржирзНрждрж╛ ржХрж░ржЫрж┐...</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </motion.div>
                )}
                <div ref={messagesEndRef} />
              </div>
            </ScrollArea>
          </CardContent>
          
          {/* Input Area */}
          <div className="border-t p-4">
            <div className="flex gap-2">
              <Input
                value={input}
                onChange={(e) => setInput(e.target.value)}
                onKeyPress={handleKeyPress}
                placeholder="ржЖржкржирж╛рж░ ржмрзАржЬржЧржгрж┐ржд ржкрзНрж░рж╢рзНржи рж▓рж┐ржЦрзБржи... (ржЙржжрж╛рж╣рж░ржг: x + 5 = 10)"
                className="flex-1 font-['Hind_Siliguri']"
                disabled={isLoading}
              />
              <Button
                onClick={handleSendMessage}
                disabled={isLoading || !input.trim()}
                size="icon"
              >
                <Send className="h-4 w-4" />
              </Button>
            </div>
            <div className="flex items-center justify-between mt-2 text-xs text-muted-foreground font-['Hind_Siliguri']">
              <span>Enter ржЪрзЗржкрзЗ ржкрж╛ржарж╛ржи</span>
              <span>Powered by AI + Database</span>
            </div>
          </div>
        </Card>
      </div>

      {/* Quick Actions */}
      <div className="container mx-auto px-4 pb-8 max-w-4xl">
        <div className="text-center mb-4">
          <h3 className="text-lg font-semibold text-primary font-['Hind_Siliguri'] mb-2">ЁЯЪА ржжрзНрж░рзБржд рж╢рзБрж░рзБ ржХрж░рзБржи</h3>
        </div>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3">
          <Button
            variant="outline"
            className="p-4 h-auto flex flex-col items-start text-left font-['Hind_Siliguri'] hover:bg-primary/5 border-primary/20"
            onClick={() => setInput("2x + 5 = 15 рж╕ржорж╛ржзрж╛ржи ржХрж░рзЛ")}
          >
            <Calculator className="h-5 w-5 mb-2 text-primary" />
            <div className="font-semibold text-sm">ЁЯзо рж░рзИржЦрж┐ржХ рж╕ржорзАржХрж░ржг</div>
            <div className="text-xs text-muted-foreground">2x + 5 = 15 рж╕ржорж╛ржзрж╛ржи</div>
          </Button>
          
          <Button
            variant="outline"
            className="p-4 h-auto flex flex-col items-start text-left font-['Hind_Siliguri'] hover:bg-primary/5 border-primary/20"
            onClick={() => setInput("x┬▓ + 3x + 2 = 0 рж╕ржорж╛ржзрж╛ржи ржХрж░рзЛ")}
          >
            <Sparkles className="h-5 w-5 mb-2 text-primary" />
            <div className="font-semibold text-sm">ЁЯУР ржжрзНржмрж┐ржШрж╛ржд рж╕ржорзАржХрж░ржг</div>
            <div className="text-xs text-muted-foreground">x┬▓ + 3x + 2 = 0</div>
          </Button>
          
          <Button
            variant="outline"
            className="p-4 h-auto flex flex-col items-start text-left font-['Hind_Siliguri'] hover:bg-primary/5 border-primary/20"
            onClick={() => setInput("ржЧрзБржгржирзАржпрж╝ржХрж░ржг ржХрзА?")}
          >
            <BookOpen className="h-5 w-5 mb-2 text-primary" />
            <div className="font-semibold text-sm">ЁЯФв ржЧрзБржгржирзАржпрж╝ржХрж░ржг</div>
            <div className="text-xs text-muted-foreground">ржзрж╛рж░ржгрж╛ ржУ ржкржжрзНржзрждрж┐</div>
          </Button>
          
          <Button
            variant="outline"
            className="p-4 h-auto flex flex-col items-start text-left font-['Hind_Siliguri'] hover:bg-primary/5 border-primary/20"
            onClick={() => setInput("ржмрзАржЬржЧржгрж┐рждрзЗрж░ ржЗрждрж┐рж╣рж╛рж╕ ржмрж▓рзЛ")}
          >
            <History className="h-5 w-5 mb-2 text-primary" />
            <div className="font-semibold text-sm">ЁЯПЫя╕П ржЗрждрж┐рж╣рж╛рж╕</div>
            <div className="text-xs text-muted-foreground">ржЖрж▓-ржЦрзЛржпрж╝рж╛рж░рж┐ржЬржорж┐ ржерзЗржХрзЗ ржЖржЬ</div>
          </Button>
        </div>
        
        {/* Database Info */}
        <div className="mt-6 text-center">
          <Card className="p-4 bg-gradient-to-r from-primary/5 to-secondary/5 border-primary/20">
            <div className="flex items-center justify-center gap-3 text-sm text-muted-foreground font-['Hind_Siliguri']">
              <Database className="h-4 w-4 text-primary" />
              <span>ЁЯУК <strong className="font-bold text-primary">{expandedAlgebraDatabase.length}+</strong> ржЯрж┐ ржмрж┐рж╖ржпрж╝ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ рж╕ржВрж░ржХрзНрж╖рж┐ржд</span>
              <Lightbulb className="h-4 w-4 text-primary" />
              <span>ЁЯдЦ ржПржЖржЗ ржЪрж╛рж▓рж┐ржд рж╕рзНржорж╛рж░рзНржЯ рж░рзЗрж╕ржкржирзНрж╕</span>
            </div>
          </Card>
        </div>
      </div>
    </div>
  );
};

export default AlgebraChatbot;